<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C'est la météo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="img\evelyne.ico">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css" />
    <script src="https://unpkg.com/esri-leaflet/dist/esri-leaflet.js"></script>
    <script src="https://unpkg.com/esri-leaflet-geocoder/dist/esri-leaflet-geocoder.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/awesomplete/awesomplete.css" />
</head>
<body>
    <header>
        <img src="img\logo_meteo1.png" alt="Left Logo" class="logo left-logo" />
        <h1>Évelyne Dhéliat</h1>
        <img src="img\logo_imt1.jpg" alt="Right Logo" class="logo right-logo" />
    </header>

    <nav>
        <button>Aujourd'hui</button>
        <button>J+1</button>
        <button>J+2</button>
        <button>J+3</button>
        <button>J+4</button>
        <button>J+5</button>
        <button>J+6</button>
        <button>J+7</button>
    </nav>

    <section style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
        <div class="search-bar">
            <label for="latitude">Latitude:</label>
            <input type="text" id="latitude" placeholder="Latitude">
            <label for="longitude">Longitude:</label>
            <input type="text" id="longitude" placeholder="Longitude">
            <button onclick="searchLocation()">Rechercher</button>
        </div>
        <!-- Ajout de la carte Leaflet -->
        <div id="map" style="height: 400px; margin-top: 20px; width: 100%;"></div>
    </section>
    <button onclick="openModal()">Ouvrir la Fenêtre Modale</button>
    <div id="myModal" class="modal">
        <div id="modalContent">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2>Ma Fenêtre Modale</h2>
            <p>Ceci est le contenu de ma fenêtre modale.</p>
            <button onclick="closeModal()">Fermer</button>
        </div>
    </div>
    <div id="overlay" class="overlay" onclick="closeModal()"></div>


    <footer style="position: fixed;">
        &copy; 2023 My Elegant Website. All rights reserved.
    </footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
<script src="https://unpkg.com/awesomplete/awesomplete.js" async></script>

<script>
  var map = L.map('map').setView([48.8566, 2.3522], 13);
  var marker = null;

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
  }).addTo(map);

  var geocoder = L.Control.Geocoder.nominatim();
  L.Control.geocoder({
    geocoder: geocoder
  }).addTo(map);

  function searchLocation() {
    var latitude = parseFloat(document.getElementById('latitude').value);
    var longitude = parseFloat(document.getElementById('longitude').value);

    if (!isNaN(latitude) && !isNaN(longitude)) {
      var latlng = L.latLng(latitude, longitude);

      if (marker !== null) {
        map.removeLayer(marker);
      }

      // Utilisation de la géocodage inverse pour obtenir le nom de la ville
      geocoder.reverse(latlng, map.options.crs.scale(map.getZoom()), function(results) {
        var cityName = results[0].name;

        map.setView(latlng, 13);
        marker = L.marker(latlng).addTo(map).bindPopup(`Ville: ${cityName}`).openPopup();
      });
    } else {
      alert("Veuillez entrer des valeurs valides pour la latitude et la longitude.");
    }
  }
  function openModal() {
            document.getElementById('myModal').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        // Fonction pour fermer la fenêtre modale
        function closeModal() {
            document.getElementById('myModal').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }
</script>

</body>
</html>
